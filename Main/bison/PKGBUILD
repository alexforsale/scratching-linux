#-*- mode:sh -*-
pkgname=bison
pkgver=3.0.5
pkgrel=1
pkgdesc="The GNU general-purpose parser generator"
arch=('x86_64')
license=('GPL3')
url="http://www.gnu.org/software/bison/bison.html"
depends=('glibc' 'm4')
checkdepends=('flex')
source=("ftp://ftp.gnu.org/gnu/bison/${pkgname}-${pkgver}.tar.xz")
groups=('lfs-base')

if [[ -n "$(pacman -Ss ^sh$ 2>/dev/null)" ]];then
  depends+=( 'sh')
else
  optdepends+=( 'sh')
fi

prepare(){
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr --docdir=/usr/share/doc/${pkgname}-${pkgver}
}

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make
}

check() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    make -j1 check
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
md5sums=('3e54f20988ecd1b62044e25481e5f06b')
