#-*- mode:sh -*-
pkgname=gperf
pkgver=3.1
pkgrel=1
pkgdesc="Perfect hash function generator"
arch=('x86_64')
url="http://www.gnu.org/software/gperf/"
license=('GPL3')
depends=('gcc-libs')
source=("http://ftp.gnu.org/pub/gnu/gperf/${pkgname}-${pkgver}.tar.gz")
options=('!makeflags')
groups=('lfs-base')

if [[ -n "$(pacman -Ss ^texinfo$ 2>/dev/null)" ]];then
  depends+=( 'texinfo')
else
  optdepends+=( 'texinfo')
fi

prepare(){
  cd "${srcdir}"/${pkgname}-${pkgver}
  ./configure --prefix=/usr \
              --docdir=/usr/share/doc/${pkgname}-${pkgver}
}
build() {
  cd "${srcdir}"/${pkgname}-${pkgver}
  make
}

check() {
  cd "${srcdir}"/${pkgname}-${pkgver}
  make -j1 check
}

package() {
  cd "${srcdir}"/${pkgname}-${pkgver}
  make DESTDIR="${pkgdir}" install
}

md5sums=('9e251c0a618ad0824b51117d5d9db87e')
