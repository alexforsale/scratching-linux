#-*- mode: sh -*-
pkgname=grep
pkgver=3.1
pkgrel=1
pkgdesc='A string search utility'
arch=('x86_64')
license=('GPL3')
url='https://www.gnu.org/software/grep/'
depends=('glibc')
makedepends=()
source=("https://ftp.gnu.org/gnu/$pkgname/$pkgname-$pkgver.tar.xz")
groups=('lfs-base')

if [[ -n "$(pacman -Ss ^pcre$ 2>/dev/null)" ]];then
  depends+=( 'pcre')
else
  optdepends+=( 'pcre')
fi
if [[ -n "$(pacman -Ss ^texinfo$ 2>/dev/null)" ]];then
  makedepends+=( 'texinfo')
else
  optdepends+=( 'texinfo')
fi

prepare(){
  cd $pkgname-$pkgver
  ./configure --prefix=/usr --bindir=/bin
}

build() {
  cd $pkgname-$pkgver
  make
}

check() {
  cd $pkgname-$pkgver
  make -k check
}

package() {
  cd $pkgname-$pkgver
  make DESTDIR=$pkgdir install
}
md5sums=('feca7b3e7c7f4aab2b42ecbfc513b070')
